<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/5c79f33cbb.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/poster.css">
    <title>Movie Details</title>
</head>
<body>
    <div class="container">

        <div class="form-container">
            <form action="/search" method="POST">
                <input type="text" name="movieTitle" placeholder="Find a movie">
                <button type="submit">Search</button>
            </form>
        </div>

        <div class="movie-card">
            <!-- Modal -->
            <div id="myModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <span class="closeBtn" onclick="closeModal()">&times;</span>
                    <img src="" alt="movie-poster-modal" class="movie-poster-modal">
                    <h1><%= movieData.title %> (<%= releaseDate %>)</h1>
                </div>
            </div>

            <h2 class="movie-title"><%= movieData.title %></h2>
            <p class="movie-genres">
                <span class="movie-rating">PG-13</span>
                <span class="release-date"><%= releaseDate %></span>
                <span class="genres"><%= genres %></span>
                <span class="movie-duration"><%= movieData.runtime %> minutes</span>
            </p>

            <div class="movie-poster-container">
                <img src="<%= poster %>" alt="Movie Poster" class="movie-poster" onclick="openModal()">
            </div>

            <div class="movie-info-container">
                <p class="movie-info-quote"><%= movieData.tagline %></p>
                <h2 class="movie-info-overview-title">Overview</h2>
                <p class="movie-info-overview"><%= movieData.overview %></p>

                <div class="movie-info-actions">
                    <ul>
                        <li><a href="#" class="add-fav"><i class="fas fa-heart"></i></a></li>
                        <li><a href="#" class="add-bookmark"><i class="fas fa-bookmark"></i></a></li>
                        <li><a href="#" class="rate-movie"><i class="fas fa-star-half-alt"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="bot-container">
            <iframe
                allow="microphone;"
                width="350"
                height="430"
                src="https://console.dialogflow.com/api-client/demo/embedded/0712d5c3-2428-4930-974c-6831beeced6e">
            </iframe>
            
        <footer>
            <h3>Find me to discuss the movie</h3>
            <ul>
                <li><a href="#">Twitter <i class="fab fa-twitter"></i></a></li>
                <li><a href="#">Instagram <i class="fab fa-instagram"></i></a></li>
                <li><a href="#">Facebook <i class="fab fa-facebook"></i></a></li>
            </ul>
            <p>ARTVES &#169; <%= year %></p>
        </footer>
    </div>

    <!-- Inline JavaScript -->
    <script>
        function openModal() {
            const modal = document.getElementById('myModal');
            const poster = document.querySelector('.movie-poster').src;
            const modalImage = document.querySelector('.movie-poster-modal');
            modalImage.src = poster;
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.getElementById('myModal');
            modal.style.display = 'none';
        }

        window.addEventListener('click', function (event) {
            const modal = document.getElementById('myModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
    </script>
</body>
</html>